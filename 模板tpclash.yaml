mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: true
external-controller : 0.0.0.0:9091  # centosçš„cockpitæ˜¯9090ç«¯å£
secret: clash
profile:
    tracing: true

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false  # tun.auto-routeä¸æ”¯æŒipv6
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - +.stun.*.*
    - +.stun.*.*.*
    - +.stun.*.*.*.*
    - +.stun.*.*.*.*.*
    - "*.n.n.srv.nintendo.net"
    - +.stun.playstation.net
    - xbox.*.*.microsoft.com
    - "*.*.xboxlive.com"
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"
    - WORKGROUP
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-redir: true
  auto-detect-interface: true

script:
  shortcuts:
    quic: network == 'udp' and (dst_port == 443 or dst_port == 4483 or dst_port == 9305)

proxy-providers:
  jichang:
    type: http
    url: "https://pub-api-1.bianyuan.xyz/sub?target=clash&list=true&url=è®¢é˜…åœ°å€urlencode"
    interval: 86400  # ä¸€å¤©æ›´æ–°ä¸€æ¬¡ï¼Œå°±ç®—æƒ³æ›´æ–°äº†ä¹Ÿå¯ä»¥æ‰‹åŠ¨
    path: ./jichang.yaml
    health-check:  # åªæœ‰cfwä¼šè‡ªå·±å¦å¤–åŠ ä¸Šï¼Œæ²¡æœ‰è¿™ä¸ªclashå°±ä¸ä¼šæµ‹é€Ÿï¼Œå³ä½¿ä¸‹é¢urltestä¹Ÿæ²¡ç”¨ï¼›
      enable: true
      interval: 600  # å¦‚æœtrueè¿™ä¸ªæ˜¯å¿…é¡»è¦çš„ï¼Œæ²¡æœ‰çš„è¯ä¼šæŠ¥é”™
      # lazy: true
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - name: â˜ï¸ å¾®è½¯äº‘ç›˜  # ç½‘å…³é‡Œé¢è¿™ä¸ªè¦ç›´è¿ï¼Œä¸ç„¶onedriveèµ°ç¿»å¢™äº†
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies:
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
    type: select
    proxies:
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: â¬‡ï¸ PTä¸‹è½½
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸµ GFWlist
    type: select
    proxies:
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸŠ å°šæœªåŒ¹é…
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    use:
      - jichang
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(æµé‡|å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤)).*'
    use:
      - jichang
  - name: ğŸ”“ ç¿»å¢™
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: 'æ¸¯|HK|Hong Kong'
    use:  # è¿™é‡Œç”¨proxiesæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºfilteråªä¼šå¯¹proxiesåå­—èµ·ä½œç”¨ï¼Œä¸ä¼šåƒuseä¸€æ ·å¯¹é‡Œé¢çš„å†…å®¹èµ·ä½œç”¨
      - jichang
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: 'æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan'
    use:
      - jichang
  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 150
    filter: 'ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States'
    use:
      - jichang
  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: 'å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan'
    use:
      - jichang
  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: 'æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore'
    use:
      - jichang
  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: 'KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“'
    use:
      - jichang

rule-providers:  # åŸipcidrä¸­çš„no-resolveæ˜¯ç”Ÿæ•ˆçš„
  DirectDIY:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1dyYW5kei9teXJ1bGUvbWFpbi9EaXJlY3RESVkubGlzdA=="
    format: 'yaml'
    interval: 86400  # ä¸€å¤©æ›´æ–°ä¸€æ¬¡ï¼Œå°±ç®—æƒ³ä¸´æ—¶æ›´æ–°ä¹Ÿå¯ä»¥æ‰‹åŠ¨
    path: ./ruleset/DirectDIY.yaml
  ProxyDIY:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1dyYW5kei9teXJ1bGUvbWFpbi9Qcm94eURJWS5saXN0"
    format: 'yaml'
    interval: 86400
    path: ./ruleset/ProxyDIY.yaml
  OneDrive:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvT25lRHJpdmUubGlzdA=="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/OneDrive.yaml
  Microsoft:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvTWljcm9zb2Z0Lmxpc3Q="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/Microsoft.yaml
  Apple:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvQXBwbGUubGlzdA=="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/Apple.yaml
  Telegram:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvVGVsZWdyYW0ubGlzdA=="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/Telegram.yaml
  YouTube:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUnVsZXNldC9Zb3VUdWJlLmxpc3Q="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/YouTube.yaml
  PT:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUnVsZXNldC9Qcml2YXRlVHJhY2tlci5saXN0"
    format: 'yaml'
    interval: 86400
    path: ./ruleset/PT.yaml
  ProxyGFWlist:
    behavior: "classical"
    type: http
    url: "https://pub-api-1.bianyuan.xyz/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUHJveHlHRldsaXN0Lmxpc3Q="
    format: 'yaml'
    interval: 86400
    path: ./ruleset/ProxyGFWlist.yaml

rules:
 - SCRIPT,plex,DIRECT,no-resolve
 - SCRIPT,v4plex,DIRECT,no-resolve
 - SCRIPT,quic,REJECT,no-resolve
 - RULE-SET,DirectDIY,DIRECT
 - RULE-SET,ProxyDIY,ğŸ”“ ç¿»å¢™
 - RULE-SET,OneDrive,â˜ï¸ å¾®è½¯äº‘ç›˜
 - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
 - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡
 - RULE-SET,Telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
 - RULE-SET,YouTube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
 - RULE-SET,PT,â¬‡ï¸ PTä¸‹è½½
 - RULE-SET,ProxyGFWlist,ğŸµ GFWlist
 - MATCH,ğŸŠ å°šæœªåŒ¹é…