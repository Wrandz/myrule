mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: true

script:
  shortcuts:
    quic: network == 'udp' and (dst_port == 443 or dst_port == 4483 or dst_port == 9305)

proxy-providers:
  jichang:
    type: http
    url: "https://azsub.acousticlab.site/sub?target=clash&list=true&url=è®¢é˜…åœ°å€urlencode"  # å¦‚æœè®¢é˜…è½¬æ¢åœ°å€æ”¹äº†ï¼Œåé¢rule provideré‚£é‡Œä¹Ÿè¦æ”¹ä¸€ä¸‹
    interval: 3600
    path: ./jichang.yaml
    health-check:  # åªè¦å¡«äº†ä¸‹é¢çš„é“¾æ¥ï¼Œenableä¸å¼€ä¹Ÿè¡Œï¼Œå› ä¸ºcfwæœ‰æŒ‰é’®ï¼›å’Œtest latencyæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼›ä¸€èˆ¬ä¸éœ€è¦å¼„ï¼Œå› ä¸ºè‡ªåŠ¨é€‰æ‹©ç»„é‡Œé¢å·²ç»æœ‰intervaläº†
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - name: â˜ï¸ å¾®è½¯äº‘ç›˜  # ç½‘å…³é‡Œé¢è¿™ä¸ªè¦ç›´è¿ï¼Œä¸ç„¶onedriveèµ°ç¿»å¢™äº†
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ’¡ AI
    type: select
    proxies:
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸŠ å°šæœªåŒ¹é…
    type: select
    proxies:
      - DIRECT
      - ğŸ”“ ç¿»å¢™
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸ”“ ç¿»å¢™
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
  - name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    use:
      - jichang
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(æµé‡|å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤)).*'
    use:
      - jichang
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:æ¸¯|HK|Hong Kong)'
    use:
      - jichang
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan)'
    use:
      - jichang
  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 150
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)'
    use:
      - jichang
  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan)'
    use:
      - jichang
  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore)'
    use:
      - jichang
  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: '^(?!.*(?:å¥—é¤|åœ°å€|å®˜ç½‘|ç”µæŠ¥ç¾¤|TGç¾¤|æ¨è|å‰©ä½™æµé‡)).*(?:KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“)'
    use:
      - jichang

rule-providers:  # åŸipcidrä¸­çš„no-resolveæ˜¯ç”Ÿæ•ˆçš„

  Direct:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1dyYW5kei9teXJ1bGUvbWFpbi9EaXJlY3QubGlzdA=="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/DirectDIY.yaml
  Proxy:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1dyYW5kei9teXJ1bGUvbWFpbi9Qcm94eS5saXN0"
    format: 'yaml'
    interval: 3600
    path: ./ruleset/ProxyDIY.yaml
  OneDrive:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvT25lRHJpdmUubGlzdA=="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/OneDrive.yaml
  Microsoft:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvTWljcm9zb2Z0Lmxpc3Q="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/Microsoft.yaml
  OpenAI:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1JlcGN6L1Rvb2wvWC9DbGFzaC9SdWxlcy9PcGVuQUkubGlzdA=="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/OpenAI.yaml
  Claude:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvQ2xhc2gvQ2xhdWRlL0NsYXVkZS5saXN0"
    format: 'yaml'
    interval: 3600
    path: ./ruleset/Claude.yaml
  Gemini:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JsYWNrbWF0cml4Ny9pb3NfcnVsZV9zY3JpcHQvbWFzdGVyL3J1bGUvQ2xhc2gvR2VtaW5pL0dlbWluaS5saXN0"
    format: 'yaml'
    interval: 3600
    path: ./ruleset/Gemini.yaml
  Telegram:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvVGVsZWdyYW0ubGlzdA=="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/Telegram.yaml
  YouTube:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUnVsZXNldC9Zb3VUdWJlLmxpc3Q="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/YouTube.yaml
  ProxyGFWlist:
    behavior: "classical"
    type: http
    url: "https://azsub.acousticlab.site/getruleset?type=6&url=aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0FDTDRTU1IvQUNMNFNTUi9tYXN0ZXIvQ2xhc2gvUHJveHlHRldsaXN0Lmxpc3Q="
    format: 'yaml'
    interval: 3600
    path: ./ruleset/ProxyGFWlist.yaml

rules:
 - SCRIPT,quic,REJECT,no-resolve  # å¿…é¡»åŠ no-resolveï¼Œå¦åˆ™dnsæ³„éœ²äº†
 - RULE-SET,Direct,DIRECT
 - RULE-SET,Proxy,ğŸ”“ ç¿»å¢™
 - RULE-SET,OneDrive,â˜ï¸ å¾®è½¯äº‘ç›˜
 - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
 - RULE-SET,OpenAI,ğŸ’¡ AI
 - RULE-SET,Claude,ğŸ’¡ AI
 - RULE-SET,Gemini,ğŸ’¡ AI
 - RULE-SET,Telegram,ğŸ”“ ç¿»å¢™
 - RULE-SET,YouTube,ğŸ”“ ç¿»å¢™
 - RULE-SET,ProxyGFWlist,ğŸ”“ ç¿»å¢™
 - MATCH,ğŸŠ å°šæœªåŒ¹é…